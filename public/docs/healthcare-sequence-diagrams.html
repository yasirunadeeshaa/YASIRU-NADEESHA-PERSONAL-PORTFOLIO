<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthcare System - Sequence Diagrams</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
        }
        .diagram-section {
            margin: 40px 0;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            background: #fafafa;
        }
        .diagram-title {
            color: #34495e;
            font-size: 24px;
            margin-bottom: 10px;
            text-align: center;
        }
        .diagram-description {
            color: #7f8c8d;
            text-align: center;
            margin-bottom: 20px;
        }
        .sequence-diagram {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            display: block;
        }
        .notes {
            margin-top: 20px;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 4px;
            border-left: 4px solid #2196f3;
        }
        .notes h4 {
            margin-top: 0;
            color: #1976d2;
        }
        .notes ul {
            margin: 10px 0;
            padding-left: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Healthcare Appointment System</h1>
        <p class="subtitle">Sequence Diagrams for Core Workflows</p>
        
        <!-- User Registration Flow -->
        <div class="diagram-section">
            <h2 class="diagram-title">User Registration & Login Flow</h2>
            <p class="diagram-description">Complete flow for new user registration and authentication</p>
            
            <svg class="sequence-diagram" viewBox="0 0 1200 800">
                <!-- Actors -->
                <rect x="50" y="50" width="100" height="40" fill="#3498db" rx="4"/>
                <text x="100" y="75" text-anchor="middle" fill="white" font-weight="bold">User</text>
                <line x1="100" y1="90" x2="100" y2="750" stroke="#3498db" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="250" y="50" width="120" height="40" fill="#e74c3c" rx="4"/>
                <text x="310" y="75" text-anchor="middle" fill="white" font-weight="bold">Frontend</text>
                <line x1="310" y1="90" x2="310" y2="750" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="470" y="50" width="120" height="40" fill="#f39c12" rx="4"/>
                <text x="530" y="75" text-anchor="middle" fill="white" font-weight="bold">API Gateway</text>
                <line x1="530" y1="90" x2="530" y2="750" stroke="#f39c12" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="690" y="50" width="120" height="40" fill="#27ae60" rx="4"/>
                <text x="750" y="75" text-anchor="middle" fill="white" font-weight="bold">Auth Service</text>
                <line x1="750" y1="90" x2="750" y2="750" stroke="#27ae60" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="910" y="50" width="120" height="40" fill="#9b59b6" rx="4"/>
                <text x="970" y="75" text-anchor="middle" fill="white" font-weight="bold">Database</text>
                <line x1="970" y1="90" x2="970" y2="750" stroke="#9b59b6" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="1050" y="50" width="120" height="40" fill="#1abc9c" rx="4"/>
                <text x="1110" y="75" text-anchor="middle" fill="white" font-weight="bold">Email Service</text>
                <line x1="1110" y1="90" x2="1110" y2="750" stroke="#1abc9c" stroke-width="2" stroke-dasharray="5,5"/>
                
                <!-- Registration Flow -->
                <g>
                    <!-- Step 1 -->
                    <line x1="100" y1="120" x2="310" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="205" y="115" text-anchor="middle" font-size="12">1. Fill registration form</text>
                    
                    <!-- Step 2 -->
                    <line x1="310" y1="150" x2="530" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="420" y="145" text-anchor="middle" font-size="12">2. POST /auth/register</text>
                    
                    <!-- Step 3 -->
                    <line x1="530" y1="180" x2="750" y2="180" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="640" y="175" text-anchor="middle" font-size="12">3. Validate data</text>
                    
                    <!-- Step 4 -->
                    <line x1="750" y1="210" x2="970" y2="210" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="860" y="205" text-anchor="middle" font-size="12">4. Check email exists</text>
                    
                    <!-- Step 5 -->
                    <line x1="970" y1="240" x2="750" y2="240" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
                    <text x="860" y="235" text-anchor="middle" font-size="12">5. Email available</text>
                    
                    <!-- Step 6 -->
                    <line x1="750" y1="270" x2="970" y2="270" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="860" y="265" text-anchor="middle" font-size="12">6. Create user record</text>
                    
                    <!-- Step 7 -->
                    <line x1="750" y1="300" x2="1110" y2="300" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="930" y="295" text-anchor="middle" font-size="12">7. Send verification email</text>
                    
                    <!-- Step 8 -->
                    <line x1="750" y1="330" x2="530" y2="330" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
                    <text x="640" y="325" text-anchor="middle" font-size="12">8. Registration success</text>
                    
                    <!-- Step 9 -->
                    <line x1="530" y1="360" x2="310" y2="360" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
                    <text x="420" y="355" text-anchor="middle" font-size="12">9. Return success</text>
                    
                    <!-- Step 10 -->
                    <line x1="310" y1="390" x2="100" y2="390" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
                    <text x="205" y="385" text-anchor="middle" font-size="12">10. Show success message</text>
                </g>
                
                <!-- Login Flow -->
                <g>
                    <rect x="40" y="430" width="1120" height="30" fill="#ecf0f1" rx="4"/>
                    <text x="600" y="450" text-anchor="middle" font-weight="bold">Login Flow</text>
                    
                    <!-- Step 1 -->
                    <line x1="100" y1="490" x2="310" y2="490" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="205" y="485" text-anchor="middle" font-size="12">1. Enter credentials</text>
                    
                    <!-- Step 2 -->
                    <line x1="310" y1="520" x2="530" y2="520" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="420" y="515" text-anchor="middle" font-size="12">2. POST /auth/login</text>
                    
                    <!-- Step 3 -->
                    <line x1="530" y1="550" x2="750" y2="550" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="640" y="545" text-anchor="middle" font-size="12">3. Validate credentials</text>
                    
                    <!-- Step 4 -->
                    <line x1="750" y1="580" x2="970" y2="580" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="860" y="575" text-anchor="middle" font-size="12">4. Verify user</text>
                    
                    <!-- Step 5 -->
                    <line x1="970" y1="610" x2="750" y2="610" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
                    <text x="860" y="605" text-anchor="middle" font-size="12">5. User verified</text>
                    
                    <!-- Step 6 -->
                    <rect x="720" y="630" width="60" height="30" fill="#27ae60" opacity="0.3"/>
                    <text x="750" y="650" text-anchor="middle" font-size="12">Generate JWT</text>
                    
                    <!-- Step 7 -->
                    <line x1="750" y1="680" x2="530" y2="680" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
                    <text x="640" y="675" text-anchor="middle" font-size="12">6. Return tokens</text>
                    
                    <!-- Step 8 -->
                    <line x1="530" y1="710" x2="310" y2="710" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
                    <text x="420" y="705" text-anchor="middle" font-size="12">7. Login success</text>
                    
                    <!-- Step 9 -->
                    <line x1="310" y1="740" x2="100" y2="740" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
                    <text x="205" y="735" text-anchor="middle" font-size="12">8. Redirect to dashboard</text>
                </g>
                
                <!-- Arrow marker -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
                    </marker>
                </defs>
            </svg>
            
            <div class="notes">
                <h4>Key Points:</h4>
                <ul>
                    <li>Email verification is required for new registrations</li>
                    <li>JWT tokens are generated with 1-hour expiry for access token</li>
                    <li>Refresh tokens allow for seamless re-authentication</li>
                    <li>Password hashing uses bcrypt with salt rounds of 10</li>
                </ul>
            </div>
        </div>
        
        <!-- Appointment Booking Flow -->
        <div class="diagram-section">
            <h2 class="diagram-title">Appointment Booking Flow</h2>
            <p class="diagram-description">Complete workflow for booking a doctor appointment</p>
            
            <svg class="sequence-diagram" viewBox="0 0 1200 900">
                <!-- Actors -->
                <rect x="50" y="50" width="100" height="40" fill="#3498db" rx="4"/>
                <text x="100" y="75" text-anchor="middle" fill="white" font-weight="bold">Patient</text>
                <line x1="100" y1="90" x2="100" y2="850" stroke="#3498db" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="220" y="50" width="120" height="40" fill="#e74c3c" rx="4"/>
                <text x="280" y="75" text-anchor="middle" fill="white" font-weight="bold">Frontend</text>
                <line x1="280" y1="90" x2="280" y2="850" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="390" y="50" width="140" height="40" fill="#27ae60" rx="4"/>
                <text x="460" y="75" text-anchor="middle" fill="white" font-weight="bold">Appointment API</text>
                <line x1="460" y1="90" x2="460" y2="850" stroke="#27ae60" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="580" y="50" width="120" height="40" fill="#f39c12" rx="4"/>
                <text x="640" y="75" text-anchor="middle" fill="white" font-weight="bold">Doctor Service</text>
                <line x1="640" y1="90" x2="640" y2="850" stroke="#f39c12" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="750" y="50" width="120" height="40" fill="#9b59b6" rx="4"/>
                <text x="810" y="75" text-anchor="middle" fill="white" font-weight="bold">Database</text>
                <line x1="810" y1="90" x2="810" y2="850" stroke="#9b59b6" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="920" y="50" width="120" height="40" fill="#e74c3c" rx="4"/>
                <text x="980" y="75" text-anchor="middle" fill="white" font-weight="bold">Redis Cache</text>
                <line x1="980" y1="90" x2="980" y2="850" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="1050" y="50" width="140" height="40" fill="#1abc9c" rx="4"/>
                <text x="1120" y="75" text-anchor="middle" fill="white" font-weight="bold">Notification Service</text>
                <line x1="1120" y1="90" x2="1120" y2="850" stroke="#1abc9c" stroke-width="2" stroke-dasharray="5,5"/>
                
                <!-- Flow -->
                <g>
                    <!-- Search doctors -->
                    <line x1="100" y1="120" x2="280" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="190" y="115" text-anchor="middle" font-size="12">1. Search doctors</text>
                    
                    <line x1="280" y1="150" x2="460" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="370" y="145" text-anchor="middle" font-size="12">2. GET /doctors/search</text>
                    
                    <line x1="460" y1="180" x2="640" y2="180" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="550" y="175" text-anchor="middle" font-size="12">3. Get doctor list</text>
                    
                    <line x1="640" y1="210" x2="980" y2="210" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="810" y="205" text-anchor="middle" font-size="12">4. Check cache</text>
                    
                    <line x1="980" y1="240" x2="640" y2="240" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead2)"/>
                    <text x="810" y="235" text-anchor="middle" font-size="12">5. Cache miss</text>
                    
                    <line x1="640" y1="270" x2="810" y2="270" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="725" y="265" text-anchor="middle" font-size="12">6. Query doctors</text>
                    
                    <line x1="810" y1="300" x2="640" y2="300" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead2)"/>
                    <text x="725" y="295" text-anchor="middle" font-size="12">7. Return doctors</text>
                    
                    <line x1="640" y1="330" x2="980" y2="330" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="810" y="325" text-anchor="middle" font-size="12">8. Cache results</text>
                    
                    <line x1="640" y1="360" x2="460" y2="360" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead2)"/>
                    <text x="550" y="355" text-anchor="middle" font-size="12">9. Doctor list</text>
                    
                    <line x1="460" y1="390" x2="280" y2="390" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead2)"/>
                    <text x="370" y="385" text-anchor="middle" font-size="12">10. Display doctors</text>
                    
                    <!-- Select doctor and time -->
                    <rect x="40" y="420" width="1150" height="30" fill="#ecf0f1" rx="4"/>
                    <text x="615" y="440" text-anchor="middle" font-weight="bold">Select Doctor & Time Slot</text>
                    
                    <line x1="100" y1="480" x2="280" y2="480" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="190" y="475" text-anchor="middle" font-size="12">11. Select doctor</text>
                    
                    <line x1="280" y1="510" x2="460" y2="510" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="370" y="505" text-anchor="middle" font-size="12">12. GET /doctors/{id}/slots</text>
                    
                    <line x1="460" y1="540" x2="810" y2="540" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="635" y="535" text-anchor="middle" font-size="12">13. Get available slots</text>
                    
                    <line x1="810" y1="570" x2="460" y2="570" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead2)"/>
                    <text x="635" y="565" text-anchor="middle" font-size="12">14. Return slots</text>
                    
                    <line x1="460" y1="600" x2="280" y2="600" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead2)"/>
                    <text x="370" y="595" text-anchor="middle" font-size="12">15. Show calendar</text>
                    
                    <!-- Book appointment -->
                    <rect x="40" y="630" width="1150" height="30" fill="#ecf0f1" rx="4"/>
                    <text x="615" y="650" text-anchor="middle" font-weight="bold">Confirm Booking</text>
                    
                    <line x1="100" y1="690" x2="280" y2="690" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="190" y="685" text-anchor="middle" font-size="12">16. Confirm booking</text>
                    
                    <line x1="280" y1="720" x2="460" y2="720" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="370" y="715" text-anchor="middle" font-size="12">17. POST /appointments</text>
                    
                    <rect x="430" y="740" width="60" height="30" fill="#27ae60" opacity="0.3"/>
                    <text x="460" y="760" text-anchor="middle" font-size="11">Validate slot</text>
                    
                    <line x1="460" y1="790" x2="810" y2="790" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="635" y="785" text-anchor="middle" font-size="12">18. Create appointment</text>
                    
                    <line x1="460" y1="820" x2="1120" y2="820" stroke="#333" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <text x="790" y="815" text-anchor="middle" font-size="12">19. Queue notifications</text>
                    
                    <line x1="460" y1="850" x2="280" y2="850" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead2)"/>
                    <text x="370" y="845" text-anchor="middle" font-size="12">20. Booking confirmed</text>
                </g>
                
                <!-- Arrow marker -->
                <defs>
                    <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
                    </marker>
                </defs>
            </svg>
            
            <div class="notes">
                <h4>Key Points:</h4>
                <ul>
                    <li>Real-time slot availability prevents double booking</li>
                    <li>Redis cache improves doctor search performance</li>
                    <li>Notifications are queued asynchronously</li>
                    <li>Slot validation happens before database write</li>
                </ul>
            </div>
        </div>
        
        <!-- Video Consultation Flow -->
        <div class="diagram-section">
            <h2 class="diagram-title">Video Consultation Flow</h2>
            <p class="diagram-description">Real-time video consultation process</p>
            
            <svg class="sequence-diagram" viewBox="0 0 1200 800">
                <!-- Actors -->
                <rect x="50" y="50" width="100" height="40" fill="#3498db" rx="4"/>
                <text x="100" y="75" text-anchor="middle" fill="white" font-weight="bold">Patient</text>
                <line x1="100" y1="90" x2="100" y2="750" stroke="#3498db" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="200" y="50" width="100" height="40" fill="#e74c3c" rx="4"/>
                <text x="250" y="75" text-anchor="middle" fill="white" font-weight="bold">Doctor</text>
                <line x1="250" y1="90" x2="250" y2="750" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="350" y="50" width="120" height="40" fill="#f39c12" rx="4"/>
                <text x="410" y="75" text-anchor="middle" fill="white" font-weight="bold">Frontend</text>
                <line x1="410" y1="90" x2="410" y2="750" stroke="#f39c12" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="520" y="50" width="140" height="40" fill="#27ae60" rx="4"/>
                <text x="590" y="75" text-anchor="middle" fill="white" font-weight="bold">Consultation API</text>
                <line x1="590" y1="90" x2="590" y2="750" stroke="#27ae60" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="710" y="50" width="120" height="40" fill="#9b59b6" rx="4"/>
                <text x="770" y="75" text-anchor="middle" fill="white" font-weight="bold">WebRTC Server</text>
                <line x1="770" y1="90" x2="770" y2="750" stroke="#9b59b6" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="880" y="50" width="120" height="40" fill="#e67e22" rx="4"/>
                <text x="940" y="75" text-anchor="middle" fill="white" font-weight="bold">WebSocket</text>
                <line x1="940" y1="90" x2="940" y2="750" stroke="#e67e22" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="1050" y="50" width="120" height="40" fill="#34495e" rx="4"/>
                <text x="1110" y="75" text-anchor="middle" fill="white" font-weight="bold">Database</text>
                <line x1="1110" y1="90" x2="1110" y2="750" stroke="#34495e" stroke-width="2" stroke-dasharray="5,5"/>
                
                <!-- Flow -->
                <g>
                    <!-- Join consultation -->
                    <line x1="100" y1="120" x2="410" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="255" y="115" text-anchor="middle" font-size="12">1. Join consultation</text>
                    
                    <line x1="410" y1="150" x2="590" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="500" y="145" text-anchor="middle" font-size="12">2. POST /consultations/start</text>
                    
                    <line x1="590" y1="180" x2="1110" y2="180" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="850" y="175" text-anchor="middle" font-size="12">3. Verify appointment</text>
                    
                    <line x1="590" y1="210" x2="770" y2="210" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="680" y="205" text-anchor="middle" font-size="12">4. Create room</text>
                    
                    <line x1="770" y1="240" x2="590" y2="240" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead3)"/>
                    <text x="680" y="235" text-anchor="middle" font-size="12">5. Room credentials</text>
                    
                    <line x1="590" y1="270" x2="940" y2="270" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="765" y="265" text-anchor="middle" font-size="12">6. Subscribe to room</text>
                    
                    <line x1="590" y1="300" x2="410" y2="300" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead3)"/>
                    <text x="500" y="295" text-anchor="middle" font-size="12">7. Return meeting details</text>
                    
                    <!-- Doctor joins -->
                    <rect x="40" y="330" width="1150" height="30" fill="#ecf0f1" rx="4"/>
                    <text x="615" y="350" text-anchor="middle" font-weight="bold">Doctor Joins</text>
                    
                    <line x1="250" y1="390" x2="410" y2="390" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="330" y="385" text-anchor="middle" font-size="12">8. Join consultation</text>
                    
                    <line x1="410" y1="420" x2="590" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="500" y="415" text-anchor="middle" font-size="12">9. Verify doctor</text>
                    
                    <line x1="590" y1="450" x2="770" y2="450" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="680" y="445" text-anchor="middle" font-size="12">10. Join room</text>
                    
                    <line x1="770" y1="480" x2="940" y2="480" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="855" y="475" text-anchor="middle" font-size="12">11. Notify participants</text>
                    
                    <!-- Video call -->
                    <rect x="40" y="510" width="1150" height="30" fill="#ecf0f1" rx="4"/>
                    <text x="615" y="530" text-anchor="middle" font-weight="bold">Video Consultation</text>
                    
                    <line x1="100" y1="570" x2="770" y2="570" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="435" y="565" text-anchor="middle" font-size="12">12. WebRTC connection</text>
                    
                    <line x1="250" y1="600" x2="770" y2="600" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="510" y="595" text-anchor="middle" font-size="12">13. WebRTC connection</text>
                    
                    <rect x="740" y="620" width="60" height="30" fill="#9b59b6" opacity="0.3"/>
                    <text x="770" y="640" text-anchor="middle" font-size="11">P2P video</text>
                    
                    <!-- End consultation -->
                    <rect x="40" y="670" width="1150" height="30" fill="#ecf0f1" rx="4"/>
                    <text x="615" y="690" text-anchor="middle" font-weight="bold">End Consultation</text>
                    
                    <line x1="250" y1="730" x2="590" y2="730" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="420" y="725" text-anchor="middle" font-size="12">14. End consultation</text>
                    
                    <line x1="590" y1="760" x2="1110" y2="760" stroke="#333" stroke-width="2" marker-end="url(#arrowhead3)"/>
                    <text x="850" y="755" text-anchor="middle" font-size="12">15. Save summary</text>
                </g>
                
                <!-- Arrow marker -->
                <defs>
                    <marker id="arrowhead3" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
                    </marker>
                </defs>
            </svg>
            
            <div class="notes">
                <h4>Key Points:</h4>
                <ul>
                    <li>WebRTC enables peer-to-peer video without server relay</li>
                    <li>WebSocket provides real-time signaling and presence</li>
                    <li>Consultation can be recorded with patient consent</li>
                    <li>Automatic reconnection handles network interruptions</li>
                </ul>
            </div>
        </div>
        
        <!-- Prescription Creation Flow -->
        <div class="diagram-section">
            <h2 class="diagram-title">Prescription Creation Flow</h2>
            <p class="diagram-description">Digital prescription generation and delivery</p>
            
            <svg class="sequence-diagram" viewBox="0 0 1200 700">
                <!-- Actors -->
                <rect x="50" y="50" width="100" height="40" fill="#e74c3c" rx="4"/>
                <text x="100" y="75" text-anchor="middle" fill="white" font-weight="bold">Doctor</text>
                <line x1="100" y1="90" x2="100" y2="650" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="220" y="50" width="120" height="40" fill="#f39c12" rx="4"/>
                <text x="280" y="75" text-anchor="middle" fill="white" font-weight="bold">Frontend</text>
                <line x1="280" y1="90" x2="280" y2="650" stroke="#f39c12" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="390" y="50" width="140" height="40" fill="#27ae60" rx="4"/>
                <text x="460" y="75" text-anchor="middle" fill="white" font-weight="bold">Prescription API</text>
                <line x1="460" y1="90" x2="460" y2="650" stroke="#27ae60" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="580" y="50" width="120" height="40" fill="#9b59b6" rx="4"/>
                <text x="640" y="75" text-anchor="middle" fill="white" font-weight="bold">Medicine DB</text>
                <line x1="640" y1="90" x2="640" y2="650" stroke="#9b59b6" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="750" y="50" width="120" height="40" fill="#34495e" rx="4"/>
                <text x="810" y="75" text-anchor="middle" fill="white" font-weight="bold">Database</text>
                <line x1="810" y1="90" x2="810" y2="650" stroke="#34495e" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="920" y="50" width="120" height="40" fill="#e67e22" rx="4"/>
                <text x="980" y="75" text-anchor="middle" fill="white" font-weight="bold">PDF Service</text>
                <line x1="980" y1="90" x2="980" y2="650" stroke="#e67e22" stroke-width="2" stroke-dasharray="5,5"/>
                
                <rect x="1050" y="50" width="120" height="40" fill="#1abc9c" rx="4"/>
                <text x="1110" y="75" text-anchor="middle" fill="white" font-weight="bold">Storage (S3)</text>
                <line x1="1110" y1="90" x2="1110" y2="650" stroke="#1abc9c" stroke-width="2" stroke-dasharray="5,5"/>
                
                <!-- Flow -->
                <g>
                    <!-- Create prescription -->
                    <line x1="100" y1="120" x2="280" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrowhead4)"/>
                    <text x="190" y="115" text-anchor="middle" font-size="12">1. Create prescription</text>
                    
                    <line x1="280" y1="150" x2="640" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrowhead4)"/>
                    <text x="460" y="145" text-anchor="middle" font-size="12">2. Search medicines</text>
                    
                    <line x1="640" y1="180" x2="280" y2="180" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead4)"/>
                    <text x="460" y="175" text-anchor="middle" font-size="12">3. Medicine suggestions</text>
                    
                    <line x1="100" y1="210" x2="280" y2="210" stroke="#333" stroke-width="2" marker-end="url(#arrowhead4)"/>
                    <text x="190" y="205" text-anchor="middle" font-size="12">4. Add medications</text>
                    
                    <line x1="280" y1="240" x2="460" y2="240" stroke="#333" stroke-width="2" marker-end="url(#arrowhead4)"/>
                    <text x="370" y="235" text-anchor="middle" font-size="12">5. Validate prescription</text>
                    
                    <rect x="430" y="260" width="60" height="30" fill="#27ae60" opacity="0.3"/>
                    <text x="460" y="280" text-anchor="middle" font-size="11">Check interactions</text>
                    
                    <line x1="100" y1="320" x2="280" y2="320" stroke="#333" stroke-width="2" marker-end="url(#arrowhead4)"/>
                    <text x="190" y="315" text-anchor="middle" font-size="12">6. Sign prescription</text>
                    
                    <line x1="280" y1="350" x2="460" y2="350" stroke="#333" stroke-width="2" marker-end="url(#arrowhead4)"/>
                    <text x="370" y="345" text-anchor="middle" font-size="12">7. POST /prescriptions</text>
                    
                    <line x1="460" y1="380" x2="810" y2="380" stroke="#333" stroke-width="2" marker-end="url(#arrowhead4)"/>
                    <text x="635" y="375" text-anchor="middle" font-size="12">8. Save prescription</text>
                    
                    <line x1="460" y1="410" x2="980" y2="410" stroke="#333" stroke-width="2" marker-end="url(#arrowhead4)"/>
                    <text x="720" y="405" text-anchor="middle" font-size="12">9. Generate PDF</text>
                    
                    <rect x="950" y="430" width="60" height="30" fill="#e67e22" opacity="0.3"/>
                    <text x="980" y="450" text-anchor="middle" font-size="11">Create PDF</text>
                    
                    <line x1="980" y1="480" x2="1110" y2="480" stroke="#333" stroke-width="2" marker-end="url(#arrowhead4)"/>
                    <text x="1045" y="475" text-anchor="middle" font-size="12">10. Store PDF</text>
                    
                    <line x1="1110" y1="510" x2="980" y2="510" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead4)"/>
                    <text x="1045" y="505" text-anchor="middle" font-size="12">11. PDF URL</text>
                    
                    <line x1="980" y1="540" x2="460" y2="540" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead4)"/>
                    <text x="720" y="535" text-anchor="middle" font-size="12">12. Return URL</text>
                    
                    <line x1="460" y1="570" x2="810" y2="570" stroke="#333" stroke-width="2" marker-end="url(#arrowhead4)"/>
                    <text x="635" y="565" text-anchor="middle" font-size="12">13. Update with URL</text>
                    
                    <line x1="460" y1="600" x2="280" y2="600" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead4)"/>
                    <text x="370" y="595" text-anchor="middle" font-size="12">14. Success response</text>
                    
                    <line x1="280" y1="630" x2="100" y2="630" stroke="#333" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead4)"/>
                    <text x="190" y="625" text-anchor="middle" font-size="12">15. Show confirmation</text>
                </g>
                
                <!-- Arrow marker -->
                <defs>
                    <marker id="arrowhead4" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
                    </marker>
                </defs>
            </svg>
            
            <div class="notes">
                <h4>Key Points:</h4>
                <ul>
                    <li>Digital signatures ensure prescription authenticity</li>
                    <li>Drug interaction checking prevents harmful combinations</li>
                    <li>PDFs are generated with QR codes for verification</li>
                    <li>Prescriptions are immutable once signed</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>